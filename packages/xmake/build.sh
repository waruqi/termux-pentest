TERMUX_PKG_HOMEPAGE=http://xmake.io/
TERMUX_PKG_DESCRIPTION="A cross-platform build utility based on Lua"
TERMUX_PKG_LICENSE="GPL-2.0"
TERMUX_PKG_MAINTAINER="Rabby Sheikh @xploitednoob"
TERMUX_PKG_VERSION=2.3.1
TERMUX_PKG_REVISION=2
TERMUX_PKG_SRCURL=https://github.com/xmake-io/xmake/releases/download/v${TERMUX_PKG_VERSION}/xmake-v${TERMUX_PKG_VERSION}.tar.gz
TERMUX_PKG_SHA256=9b42a9703e687fb2bdf199f5c69a177fc79cdcca9daae03cea546889a4a2b02c
TERMUX_PKG_BUILD_IN_SRC=true
TERMUX_PKG_DEPENDS="clang, make, readline"

termux_step_patch_package() {
	local PATCH1="${TERMUX_PKG_BUILDER_DIR}/makefile.patch"
	local PATCH2="${TERMUX_PKG_BUILDER_DIR}/core-makefile.patch"
	local ORIGIN1="${TERMUX_PKG_SRCDIR}/makefile"
	local ORIGIN2="${TERMUX_PKG_SRCDIR}/core/makefile"
	patch --silent -p1 "${PATCH1}" "${ORIGIN1}"
	patch --silent -p1 "${PATCH2}" "${ORIGIN2}"
}
termux_step_make() {
	make build
}
termux_step_make_install() {
	make install PREFIX="${TERMUX_PREFIX}"
}
